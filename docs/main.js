!function(e){function t(t){for(var o,s,i=t[0],a=t[1],l=t[2],y=0,f=[];y<i.length;y++)s=i[y],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);for(d&&d(t);f.length;)f.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],o=!0,i=1;i<n.length;i++){var a=n[i];0!==r[a]&&(o=!1)}o&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={0:0},c=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window.webpackJsonp=window.webpackJsonp||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=a;c.push([4,1]),n()}([,function(e,t,n){e.exports=n.p+"nodes.json"},function(e,t,n){e.exports=n.p+"links.json"},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(3);var o=n(0);let r={distance:30,densityData:[],zoomIdentity:null,screen:{},colors:{backgroundLeft:o.rgb(255,144,104),backgroundRight:o.rgb(253,116,108),contours:o.rgb(251,253,166),keywords:o.rgb(39,72,100),nodes:o.rgb(39,72,100)},style:{fontKeywords:"normal 300 1.2pt Helvetica",lineHeightKeywords:2.4,fontNodes:"bold 1.8pt Helvetica"},setScreen:()=>{r.canvas=o.select("canvas"),r.context=document.querySelector("canvas").getContext("2d"),r.context.scale(2,2),r.screen.density=1;const e=document.getElementById("simulation");r.screen.width=e.clientWidth*r.screen.density,r.screen.height=e.clientHeight*r.screen.density,r.canvas.style("width",`${e.clientWidth}px`).style("height",`${e.clientHeight}px`).attr("width",r.screen.width).attr("height",r.screen.height),r.gradient=r.context.createLinearGradient(0,0,r.screen.width/2,0),r.gradient.addColorStop(0,r.colors.backgroundLeft),r.gradient.addColorStop(1,r.colors.backgroundRight)}};const c=2*Math.PI;const s={x:0,y:0,k:0};var i=()=>{(()=>{const e=o.extent(r.nodes,e=>e.x),t=o.extent(r.nodes,e=>e.y),n=Math.max(e[1]-e[0],t[1]-t[0]),c=e[1]-e[0],i=t[1]-t[0];s.k=c/n,s.x=-e[0]*s.k,s.y=-t[0]*s.k,r.densityData=o.contourDensity().x(e=>s.x+e.x*s.k).y(e=>s.y+e.y*s.k).weight(e=>e.docs).size([c/2,i/10]).cellSize(2)(r.nodes),r.densityData.forEach(e=>e.coordinates=e.coordinates.map(e=>e.map(e=>e.map(e=>[(e[0]-s.x)/s.k,(e[1]-s.y)/s.k]))))})();const e=o.geoPath().context(r.context);r.densityData.forEach((t,n)=>{r.context.beginPath(),e(t),r.context.strokeStyle=r.colors.contours,r.context.lineWidth=.8+.1*n,r.context.stroke()})};window.s=r,r.zoomIdentity=o.zoomIdentity;const a=()=>{const e=r.zoomIdentity.x*r.screen.density,t=r.zoomIdentity.y*r.screen.density,n=r.zoomIdentity.k;r.context.save(),r.context.clearRect(0,0,r.screen.width,r.screen.height),r.context.fillStyle=r.gradient,r.context.fillRect(0,0,r.screen.width,r.screen.height),r.context.translate(e,t),r.context.scale(n,n),i(),(()=>{const e=Math.pow(20,2),t=Math.pow(60,2);r.links.forEach(n=>{const o=Math.abs(n.source.x-n.target.x),c=Math.abs(n.source.y-n.target.y),s=Math.pow(o,2)+Math.pow(c,2);if(e<s&&s<t){const e=Object.getOwnPropertyNames(n.tokens).slice(0,3),t=o/2+(n.source.x<n.target.x?n.source.x:n.target.x),s=c/2+(n.source.y<n.target.y?n.source.y:n.target.y),i=e.length*r.style.lineHeightKeywords;e.forEach((e,n)=>{r.context.beginPath(),r.context.fillStyle=r.colors.keywords,r.context.textAlign="center",r.context.font=r.style.fontKeywords,r.context.fillText(e,t,s+i/2+n*r.style.lineHeightKeywords),r.context.fill()})}})})(),r.context.beginPath(),r.context.fillStyle=r.colors.nodes,r.context.font=r.style.fontNodes,r.context.textAlign="center",r.nodes.forEach(e=>{r.context.moveTo(e.x,e.y),r.context.arc(e.x,e.y,.5,0,c),r.context.fillText(`${e.id} (${e.docs})`,e.x,e.y+4)}),r.context.fill(),r.context.restore()};var l=()=>{const e=o.forceSimulation().force("charge",o.forceManyBody().strength(-500).distanceMin(60)).force("collide",o.forceCollide().radius(r.distance).strength(.2).iterations(5)).force("center",o.forceCenter(r.screen.width/2,r.screen.height/2)).force("link",o.forceLink().id(e=>e.id).strength(e=>e.value));e.nodes(r.nodes),e.force("link").links(r.links);e.on("tick",a).on("end",()=>{r.end=!0}),r.zoom=o.zoom().on("zoom",()=>{r.zoomIdentity=o.event.transform,a()}),r.zoom.scaleExtent([.1,10]),r.zoom.scaleTo(r.canvas,.3),r.canvas.call(r.zoom),r.canvas.on("mousemove",()=>{const e=r.zoomIdentity.invertX(event.x*r.screen.density),t=r.zoomIdentity.invertY(event.y*r.screen.density);for(let c=r.nodes.length-1;c>=0;--c){const s=r.nodes[c],i=e-s.x,a=t-s.y;let l=[];for(var n in s.tokens){const e=s.tokens[n].toFixed(2);l.push(`${n} (${e})`)}if(i*i+a*a<900){let e="";e+=`<p><strong>${s.id}</strong></p>`,e+=`<p>Number of papers: ${s.docs}</p>`,e+=`<p>Tokens:<br/>${l.join("<br/>")}</p>`,o.select("#focus").html(e)}}})},d=n(1),y=n.n(d),f=n(2),h=n.n(f);window.d3=o,Promise.all([o.json(y.a),o.json(h.a)]).then(([e,t])=>{r.setScreen(),r.links=t,r.nodes=e,console.log("nodes",r.nodes.length),console.log("links",r.links.length),l()})}]);