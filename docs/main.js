!function(e){function t(t){for(var o,c,i=t[0],a=t[1],l=t[2],u=0,h=[];u<i.length;u++)c=i[u],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&h.push(r[c][0]),r[c]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);for(d&&d(t);h.length;)h.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,i=1;i<n.length;i++){var a=n[i];0!==r[a]&&(o=!1)}o&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},r={0:0},s=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var i=window.webpackJsonp=window.webpackJsonp||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=a;s.push([4,1]),n()}([,,function(e,t,n){e.exports=n.p+"network.json"},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(3);var o=n(0),r=n(1),s=n.n(r);let c={densityData:[],distance:30,zoomIdentity:null,setCanvas:()=>{c.canvas=o.select("canvas"),c.context=document.querySelector("canvas").getContext("2d")},setMatches:e=>{c.matches=e},setGraph:e=>{e.links.map(e=>{e.source=e.s,e.target=e.t,e.value=e.v,delete e.s,delete e.t,delete e.v}),c.graph=e},setPairs:e=>{c.pairs=[],s.a.bigCombination(e,2).forEach(e=>{const t=Object.keys(e[0].tokens).filter(t=>Object.keys(e[1].tokens).includes(t)).reduce((t,n)=>{const o=(e[0].tokens[n]+e[1].tokens[n])/2;return t.push([n,o]),t},[]).sort((e,t)=>t[1]-e[1]);c.pairs.push({pair:e,terms:t})})},setScreen:()=>{c.screen={},c.screen.density=1;const e=document.getElementById("simulation");c.screen.width=e.clientWidth*c.screen.density,c.screen.height=e.clientHeight*c.screen.density,o.select("canvas").style("width",`${e.clientWidth}px`).style("height",`${e.clientHeight}px`).attr("width",c.screen.width).attr("height",c.screen.height)}};const i=2*Math.PI,a=o.rgb(251,253,166);const l={x:0,y:0,k:0},d=o.rgb(251,253,166);var u=()=>{c.end&&!c.densityData.length&&(()=>{const e=o.extent(c.graph.nodes,e=>e.x),t=o.extent(c.graph.nodes,e=>e.y),n=Math.max(e[1]-e[0],t[1]-t[0]),r=e[1]-e[0],s=t[1]-t[0];l.k=r/n,l.x=-e[0]*l.k,l.y=-t[0]*l.k,c.densityData=o.contourDensity().x(e=>l.x+e.x*l.k).y(e=>l.y+e.y*l.k).weight(e=>e.docs).size([r,s]).cellSize(1).bandwidth(20).thresholds(10)(c.graph.nodes),c.densityData.forEach(e=>e.coordinates=e.coordinates.map(e=>e.map(e=>e.map(e=>[(e[0]-l.x)/l.k,(e[1]-l.y)/l.k]))))})();const e=o.geoPath().context(c.context);c.densityData.forEach((t,n)=>{c.context.beginPath(),c.context.strokeStyle=d,c.context.lineWidth=.8+.1*n,e(t),c.context.stroke()})};window.s=c,c.zoomIdentity=o.zoomIdentity;const h=()=>{const e=c.zoomIdentity.x*c.screen.density,t=c.zoomIdentity.y*c.screen.density,n=c.zoomIdentity.k;c.context.save(),c.context.clearRect(0,0,c.screen.width,c.screen.height),c.context.translate(e,t),c.context.scale(n,n),c.context.beginPath(),c.context.fillStyle=a,c.context.font="1.5pt Helvetica",c.graph.nodes.forEach(e=>{c.context.moveTo(e.x,e.y),c.context.arc(e.x,e.y,.5,0,i),c.context.fillText(`${e.id} (${e.docs})`,e.x,e.y+4)}),c.context.fill(),u(),c.context.restore()};var p=()=>{const e=o.forceSimulation().force("charge",o.forceManyBody().strength(-600)).force("collide",o.forceCollide().radius(20)).force("center",o.forceCenter(c.screen.width/2,c.screen.height/2)).force("link",o.forceLink().id(e=>e.id).strength(e=>e.value));e.nodes(c.graph.nodes),e.force("link").links(c.graph.links);e.on("tick",h).on("end",()=>{c.end=!0,h()}),c.zoom=o.zoom().on("zoom",()=>{c.zoomIdentity=o.event.transform,h()}),c.zoom.scaleExtent([.1,10]),c.zoom.scaleTo(c.canvas,.3),c.canvas.call(c.zoom),c.canvas.on("mousemove",()=>{const e=c.zoomIdentity.invertX(event.x*c.screen.density),t=c.zoomIdentity.invertY(event.y*c.screen.density);for(let r=c.graph.nodes.length-1;r>=0;--r){const s=c.graph.nodes[r],i=e-s.x,a=t-s.y;let l=[];for(var n in s.tokens){const e=s.tokens[n].toFixed(2);l.push(`${n} (${e})`)}if(i*i+a*a<900){let e="";e+=`<p><strong>${s.id}</strong></p>`,e+=`<p>Number of papers: ${s.docs}</p>`,e+=`<p>Tokens:<br/>${l.join("<br/>")}</p>`,o.select("#focus").html(e)}}})};const f=()=>{console.log("autocomplete");let e=new Set([]);for(let t=c.graph.nodes.length-1;t>=0;--t)e.add(c.graph.nodes[t].id);e=Array.from(e),function(e,t){var n;function o(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),n>=e.length&&(n=0),n<0&&(n=e.length-1),e[n].classList.add("autocomplete-active")}function r(t){for(var n=document.getElementsByClassName("autocomplete-items"),o=0;o<n.length;o++)t!=n[o]&&t!=e&&n[o].parentNode.removeChild(n[o])}e.addEventListener("input",function(o){var s,c,i,a=this.value;if(r(),!a)return!1;for(n=-1,(s=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),s.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(s),i=0;i<t.length;i++)t[i].substr(0,a.length).toUpperCase()==a.toUpperCase()&&((c=document.createElement("DIV")).innerHTML="<strong>"+t[i].substr(0,a.length)+"</strong>",c.innerHTML+=t[i].substr(a.length),c.innerHTML+="<input type='hidden' value='"+t[i]+"'>",c.addEventListener("click",function(t){e.value=this.getElementsByTagName("input")[0].value,r()}),s.appendChild(c))}),e.addEventListener("keydown",function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40==e.keyCode?(n++,o(t)):38==e.keyCode?(n--,o(t)):13==e.keyCode&&(e.preventDefault(),n>-1&&t&&t[n].click())}),document.addEventListener("click",function(e){r(e.target)})}(document.getElementById("researcher_selector"),e)};var y=n(2),m=n.n(y);const g=n(0);window.d3=g,g.json(m.a).catch(e=>console.error(e)).then(e=>{c.setCanvas(),c.setGraph(e),c.setPairs(e.nodes),c.setScreen(),f(),p(),g.select(".autocomplete").on("click",function(){console.log("here",this)})})}]);